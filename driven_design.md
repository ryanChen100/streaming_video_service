# DDD（Domain-Driven Design / 領域驅動設計）

## 定義
DDD 是一種專注於複雜業務系統的軟體設計方法，旨在通過清晰的領域模型（Domain Model）和通用語言（Ubiquitous Language）來縮小技術與業務之間的差距。

### 主要概念
	1.	領域模型
	•	表達業務領域中的核心概念和行為。
	•	例如，電子商務系統的訂單、客戶、付款等，這些是業務領域的核心模型。
	2.	通用語言（Ubiquitous Language）
	•	團隊內部的一種統一用語，讓業務人員和開發人員能夠清晰理解需求，並在同一個語言體系下溝通。
	3.	限界上下文（Bounded Context）
	•	將複雜業務分解為多個子域，每個子域有自己的語言和模型。
	•	例如，“訂單管理” 與 “庫存管理” 可以是兩個不同的上下文。
	4.	聚合（Aggregate）
	•	聚合是一個業務概念的邏輯集合，通過一個根實體（Root Entity）來管理整個邏輯邊界內的狀態。
	•	例如，“訂單” 聚合可以包含訂單的產品清單、總價、狀態等。

### 實例
	•	電子商務平台：
	•	子域 A：訂單管理（Order Management）
	•	子域 B：支付系統（Payment System）
	•	子域 C：庫存管理（Inventory Management）
	•	這三個子域有清晰的限界上下文，彼此之間通過事件或接口通信。
	•	訂單管理的領域模型包括：訂單實體（Order Entity）、訂單明細（Order Item）、顧客（Customer）等。

# BDD（Behavior-Driven Development / 行為驅動開發）

## 定義
BDD 是一種將需求描述轉化為具體測試案例的開發方法，強調用戶故事和業務行為，讓業務人員、開發人員和測試人員之間達成共識。

### 主要特點
	1.	以行為為核心
	•	關注系統「應該怎麼做」，以自然語言描述需求，確保業務需求和開發實現一一對應。
	2.	使用 Gherkin 語法
	•	用 Feature、Scenario、Given/When/Then 的結構化語法撰寫需求和測試。
	•	範例：

```gherkin
    Feature: 1對1聊天
        In order to communicate privately
        As a user
        I want to send and receive private messages

        Scenario: 成功建立 1對1 聊天
            Given "Alice" 已登入
            When "Alice" 建立 1對1 聊天邀請 "Bob"
            Then 聊天房間應該包含 "Alice" 和 "Bob"
```

	3.	團隊協作
	•	測試用例是用戶故事的具體化描述，非技術背景的業務人員也能參與需求討論，提升跨部門溝通效率。

### 實例
	•	共享經濟平台（如 Uber、Airbnb）
	•	使用者故事：
	•	Feature: 預定行程
	•	Scenario: 乘客可以預定一個新的行程
	•	Given 乘客已登入
	•	When 乘客選擇起點和終點並確認行程
	•	Then 行程應該出現在乘客的行程列表中
	•	通過 BDD，業務人員和技術團隊能用相同的語言討論需求，並通過自動化測試驗證系統行為。


# TDD（Test-Driven Development / 測試驅動開發）

## 定義
TDD 是一種開發方法，強調在撰寫功能代碼之前，先撰寫失敗的測試，然後通過最小量的程式碼使測試通過，並最終重構代碼。

### 核心步驟
	1.	Red（撰寫失敗的測試）：
    •   在功能未實現前，先撰寫一個測試用例，讓測試失敗。
	•	確認測試用例能夠準確表達需求。
	2.	Green（使測試通過）：
	•	撰寫剛好能讓測試通過的最簡單代碼。
	•	目的是快速實現功能，並檢查需求是否正確滿足。
	3.	Refactor（重構程式碼）：
	•	在所有測試通過的前提下，整理代碼結構，提升可讀性和維護性。
	•	測試確保重構後系統功能未被破壞。

### 實例
	•	電子商務購物車功能：
	1.	撰寫測試用例：新增一個商品到購物車，測試購物車商品數量是否為 1。
	2.	編寫最簡單的代碼：新增一個商品到購物車，返回商品數量為 1。
	3.	重構代碼：提升購物車結構，使其支持多個商品的新增與刪除。


|方法|	專注點	|用途	|參與角色|
|--|--|--|--|
|DDD|	領域模型與業務邏輯|	設計複雜系統，縮小業務與技術的差距|	業務分析師、架構師、開發人員|
|BDD|	系統行為與需求描述|	定義需求並驗證系統是否符合業務期望|	業務人員、測試人員、開發人員|
|TDD|	單元測試與程式碼品質|	驅動功能開發，確保程式碼可靠性與可維護性|	開發人員|

	•	DDD 對業務建模，定義架構；
	•	BDD 闡明系統的行為需求，驗證功能是否符合預期；
	•	TDD 則用測試促進良好的代碼設計，提升穩定性。

# 結論
DDD、BDD 和 TDD 不是互相排斥的，而是可以互補的開發方式。DDD 幫助開發者更好地理解業務邏輯，BDD 確保系統行為滿足業務需求，而 TDD 提高程式碼質量，降低後期維護成本。這三者結合使用，能夠大幅提升軟體開發的整體效能與品質。

---

未完成：
chat_service

